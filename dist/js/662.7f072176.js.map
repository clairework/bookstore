{"version":3,"file":"js/662.7f072176.js","mappings":"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","sources":["webpack://bookstore/./src/mixins/LocalFavorite.js","webpack://bookstore/./src/views/front/MyFavorite.vue","webpack://bookstore/./src/views/front/MyFavorite.vue?18ce"],"sourcesContent":["import { mapActions } from 'pinia'\nimport statusStore from '@/stores/statusStore'\nimport Swal from 'sweetalert2'\n\nexport default {\n  data () {\n    return {\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [],\n      favoriteId: JSON.parse(localStorage.getItem('favoriteId')) || [],\n      resentlyViewdProducts: JSON.parse(localStorage.getItem('resentlyViewdProducts')) || []\n    }\n  },\n  watch: {\n    // 用locolstorage自訂欄位並存取資料\n    favorite: {\n      handler () {\n        // localStorage只接受字串\n        localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      },\n      deep: true\n    },\n    favoriteId: {\n      handler () {\n        localStorage.setItem('favoriteId', JSON.stringify(this.favoriteId))\n      },\n      deep: true\n    },\n    resentlyViewdProducts: {\n      handler () {\n        localStorage.setItem('resentlyViewdProducts', JSON.stringify(this.resentlyViewdProducts))\n      },\n      deep: true\n    }\n  },\n  methods: {\n    ...mapActions(statusStore, ['pushMsg']),\n    toggleFavorite (product) {\n      const favoriteIndex = this.favorite.findIndex((item) => item.id === product.id)\n      if (favoriteIndex === -1) {\n        this.favorite.push(product)\n        this.favoriteId.push(product.id)\n        // this.pushMsg(true, '收藏', '已成功收藏')\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: '已成功收藏',\n          showConfirmButton: false,\n          timer: 2000\n        })\n      } else {\n        this.favorite.splice(favoriteIndex, 1)\n        this.favoriteId.splice(favoriteIndex, 1)\n        // this.pushMsg(false, '收藏', '已取消收藏')\n        Swal.fire({\n          position: 'center',\n          icon: 'warning',\n          title: '已取消收藏',\n          showConfirmButton: false,\n          timer: 2000\n        })\n      }\n      // this.emitter.emit('getfavorite')\n    },\n    removeFavoriteItem (product) {\n      const favoriteIndex = this.favorite.findIndex((item) => item.id === product.id)\n      this.favorite.splice(favoriteIndex, 1)\n      this.favoriteId.splice(favoriteIndex, 1)\n      // this.favoriteId.splice(0, this.favoriteId.length); // 清空資料\n      // this.pushMsg(false, '收藏', '已取消收藏')\n      Swal.fire({\n        position: 'center',\n        icon: 'warning',\n        title: '已取消收藏',\n        showConfirmButton: false,\n        timer: 2000\n      })\n      console.log('favorite=>',this.favorite)\n      console.log('favoriteId=>',this.favoriteId)\n    },\n    getLocalStorage () {\n      // 讀檔:取出 saveFavorite欄位字串內容轉回物件\n      return JSON.parse(localStorage.getItem('favorite'))\n    },\n    resentlyViewed (product) {\n      const resentlyViewdIndex = this.resentlyViewdProducts.findIndex((item) => item.id === product.id)\n      // 如果預覽到不同的書籍，增加一筆資料在陣列開頭，讓最新預覽的商品排在最前面\n      if (resentlyViewdIndex === -1) {\n        this.resentlyViewdProducts.unshift(product)\n        if (this.resentlyViewdProducts.length > 10) {\n          // 如果總數量超過10，刪除陣列的最後一筆資料\n          this.resentlyViewdProducts.pop()\n        }\n        // 如果預覽到重複的書籍\n      } else if (resentlyViewdIndex !== -1) {\n        // 先刪除重複的資料\n        this.resentlyViewdProducts.splice(resentlyViewdIndex, 1)\n        // 再重新推進最新的位置\n        this.resentlyViewdProducts.unshift(product)\n      }\n    }\n  }\n}\n","<!-- Views: MyFavorite.vue -->\r\n<template>\r\n  <LoadingView class=\"loading\" :active=\"isLoading\">\r\n      <div class=\"spinner-border text-primary m-5\" role=\"status\">\r\n      <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n  </LoadingView>\r\n  <div class=\"front-fav\">\r\n  <div class=\"header-banner\">\r\n    <div class=\"container\">\r\n      <div class=\"row pt-5\">\r\n          <div class=\"\">\r\n            <p class=\"pt-2 fw-bold\" style=\"font-size: 42px\">我的收藏</p>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"bg-primaryMiddle\">\r\n    <section class=\"favorite-base\">\r\n    <div class=\"container mt-n15 bg-light ps-5 pt-5 rounded-4 shadow\">\r\n      <div v-if=\"favorite.length\" class=\"\">\r\n        <div class=\"row row-cols-xl-4 row-cols-2 row-cols-md-3\">\r\n          <div v-for=\"item in favorite\" :key=\"item.id\">\r\n              <div class=\"bg-light\" style=\"height:460px;width:230px\">\r\n                <div class=\"collectionImg position-relative rounded-4 mb-3 hoverBoxShadow\" style=\"overflow: hidden; width:230px\">\r\n                  <RouterLink class=\"\" :to=\"`/product/${item.id}`\">\r\n                    <img :src=\"item.imageUrl\" alt=\"{{ item.title }}\" class=\"rounded-2 \" style=\"height:320px;width:230px\">\r\n                  </RouterLink>\r\n                  <div class=\"bookMark btn btn-sm position-absolute top-0 end-0 rounded-circle m-2\"\r\n                  @click=\"removeFavoriteItem(item)\" :class=\"favoriteId.includes(item.id) ? 'btn-secondaryDark':'btn-secondaryLight'\">\r\n                    <span class=\"material-icons-outlined text-white fs-4 mt-1\" v-if=\"favoriteId.includes(item.id)\">bookmark</span>\r\n                    <span class=\"material-icons-outlined text-white fs-4 mt-1\" v-else>bookmark_border</span>\r\n                  </div>                \r\n                </div>\r\n                <div class=\"\">\r\n                    <div style=\"max-height: 68px; overflow: hidden;line-height:2rem;\">\r\n                    <p class=\"mb-0 fw-bold d-inline-block text-dark fs-5\">{{ item.title }}</p>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-between\">\r\n                      <p class=\"text-gray600\">{{ item.author}}</p>\r\n                      <p class=\"text-primary fw-bold text-end fs-5\">NT$ {{ $filters.currency(item.price) }}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n        <div class=\"text-center\">\r\n          <div class=\"bg-light py-5 px-2 px-sm-5\">\r\n            <h2 class=\"mb-5 fw-bolder\">尚無收藏書籍</h2>\r\n            <router-link class=\"btn btn-secondary fs-5 fw-bolder\" to=\"/list\">\r\n              把喜歡的書籍加入進來吧 !\r\n            </router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport favoriteMixin from '@/mixins/LocalFavorite'\r\n\r\nimport { mapState, mapActions } from 'pinia'\r\nimport cartStore from '@/stores/cartStore'\r\nimport statusStore from '@/stores/statusStore'\r\n\r\nexport default {\r\n  mixins: [favoriteMixin],\r\n  data () {\r\n    return {\r\n      title: ''\r\n    }\r\n  },\r\n  components: {\r\n  },\r\n  computed: {\r\n    ...mapState(cartStore, ['cartData']),\r\n    ...mapState(statusStore, ['isLoadingItem', 'isLoadingItem', 'isLoading'])\r\n  },\r\n  methods: {\r\n    ...mapActions(cartStore, ['addToCart']),\r\n    ...mapActions(statusStore, ['loadingEffect', 'loadingItemEffect', 'pushMsg']),\r\n    toProduct (id) {\r\n      this.$router.push(`/product/${id}`)\r\n    }\r\n  },\r\n  mounted () {\r\n    // this.loadingEffect()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./MyFavorite.vue?vue&type=template&id=3ebb4fc4\"\nimport script from \"./MyFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./MyFavorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\clair\\\\OneDrive\\\\桌面\\\\Claire\\\\VueProject3\\\\bookstore\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["data","favorite","JSON","parse","localStorage","getItem","favoriteId","resentlyViewdProducts","watch","handler","setItem","stringify","this","deep","methods","mapActions","statusStore","toggleFavorite","product","favoriteIndex","findIndex","item","id","push","Swal","position","icon","title","showConfirmButton","timer","splice","removeFavoriteItem","console","log","getLocalStorage","resentlyViewed","resentlyViewdIndex","unshift","length","pop","_createElementVNode","class","role","style","_createVNode","_component_LoadingView","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementBlock","_hoisted_7","_hoisted_8","_Fragment","_renderList","key","_hoisted_9","_hoisted_10","_component_RouterLink","to","src","imageUrl","alt","_normalizeClass","includes","onClick","$event","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_toDisplayString","_hoisted_18","_hoisted_19","author","_hoisted_20","$filters","currency","price","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_component_router_link","mixins","favoriteMixin","components","computed","mapState","cartStore","toProduct","$router","mounted","__exports__","render"],"sourceRoot":""}