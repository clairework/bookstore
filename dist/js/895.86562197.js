"use strict";(self["webpackChunkbookstore"]=self["webpackChunkbookstore"]||[]).push([[895],{206:function(t,e,s){s(7658);var i=s(2578),r=s(6294),o=s(2492),a=s.n(o);e["Z"]={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[],favoriteId:JSON.parse(localStorage.getItem("favoriteId"))||[],resentlyViewdProducts:JSON.parse(localStorage.getItem("resentlyViewdProducts"))||[]}},watch:{favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite))},deep:!0},favoriteId:{handler(){localStorage.setItem("favoriteId",JSON.stringify(this.favoriteId))},deep:!0},resentlyViewdProducts:{handler(){localStorage.setItem("resentlyViewdProducts",JSON.stringify(this.resentlyViewdProducts))},deep:!0}},methods:{...(0,i.nv)(r.Z,["pushMsg"]),toggleFavorite(t){const e=this.favorite.findIndex((e=>e.id===t.id));-1===e?(this.favorite.push(t),this.favoriteId.push(t.id),a().fire({position:"center",icon:"success",title:"已成功收藏",showConfirmButton:!1,timer:2e3})):(this.favorite.splice(e,1),this.favoriteId.splice(e,1),a().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3}))},removeFavoriteItem(t){const e=this.favorite.findIndex((e=>e.id===t.id));this.favorite.splice(e,1),this.favoriteId.splice(e,1),a().fire({position:"center",icon:"warning",title:"已取消收藏",showConfirmButton:!1,timer:2e3}),console.log("favorite=>",this.favorite),console.log("favoriteId=>",this.favoriteId)},getLocalStorage(){return JSON.parse(localStorage.getItem("favorite"))},resentlyViewed(t){const e=this.resentlyViewdProducts.findIndex((e=>e.id===t.id));-1===e?(this.resentlyViewdProducts.unshift(t),this.resentlyViewdProducts.length>10&&this.resentlyViewdProducts.pop()):-1!==e&&(this.resentlyViewdProducts.splice(e,1),this.resentlyViewdProducts.unshift(t))}}}},9895:function(t,e,s){s.r(e),s.d(e,{default:function(){return nt}});var i=s(3396),r=s(9242),o=s(7139);const a=(0,i._)("div",{class:"spinner-border text-primary m-5",role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),n={class:"section_base bg-white"},l={class:"container"},d={class:"row"},c={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb "},p={class:"breadcrumb pt-5 pb-2 py-md-6 m-0 fs-5 text-gray700"},u={class:"breadcrumb-item"},h={class:"breadcrumb-item ps-1",style:{cursor:"pointer"}},f=(0,i._)("li",{class:"breadcrumb-item ps-1 active","aria-current":"page"},"商品介紹",-1),g={class:"row py-4"},m={class:"col-xl-5 col-lg-6 mb-3 col-12"},b=["src","alt"],y={class:"col-xl-7 col-lg-6 mb-3 mb-md-0 col-12"},w={class:"mt-0"},v={class:"fs-2 fw-bold mb-3 text-dark title"},_={class:"mb-3"},k=["innerHTML"],x={class:"mb-3",style:{height:"88px",overflow:"hidden"}},I=["innerHTML"],L={class:"mb-4 text-gray700"},M={class:"fs-5 mb-2"},T={class:"fs-5 mb-2"},C={class:"fs-5 mb-2"},S={class:"fs-5"},P={class:"d-flex mb-4"},V={class:"text-decoration-line-through text-gray fs-5 me-3"},z={class:"fs-4 fw-bolder text-secondaryDark"},U={class:"d-flex mt-3 fw-bold"},H={key:0},$=(0,i._)("span",null,[(0,i._)("i",{class:"fas fa-heart"})],-1),q={key:1},N=(0,i._)("span",null,[(0,i._)("i",{class:"far fa-heart"})],-1),J=(0,i._)("i",{class:"fas fa-spinner fa-pulse ms-1"},null,-1),O=[J],Z={class:"section_detail bg-light pt-5"},D={class:"container"},j={class:"bg-white rounded-4 ps-4 pt-3 pb-4 shadow-sm text-start"},F=(0,i._)("h4",{class:"text-dark mb-3 fw-bold",style:{}},"內容介紹",-1),B=["innerHTML"],W=(0,i._)("hr",null,null,-1),Y=(0,i._)("h4",{class:"text-dark mb-3 fw-bold",style:{}},"目錄",-1),A=["innerHTML"],E={class:"mx-auto pb-5"},G=(0,i._)("p",{class:"fw-bold mt-4 text-gray700 fs-4 ps-3"},"關於作者",-1),K=(0,i._)("hr",{style:{margin:"8px 0px 0px","border-top":"1px solid rgb(199 200 201)"}},null,-1),Q={class:"fw-bold fs-5 text-dark py-4 ps-3"},R=["innerHTML"];function X(t,e,s,J,X,tt){const et=(0,i.up)("LoadingView"),st=(0,i.up)("router-link"),it=(0,i.up)("Skeletor");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(et,{class:"loading",active:X.isLoading},{default:(0,i.w5)((()=>[a])),_:1},8,["active"]),(0,i._)("section",n,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("nav",c,[(0,i._)("ol",p,[(0,i._)("li",u,[(0,i.Wm)(st,{to:"/"},{default:(0,i.w5)((()=>[(0,i.Uk)("首頁")])),_:1})]),(0,i._)("li",h,[(0,i._)("a",{onClick:e[0]||(e[0]=(0,r.iM)((t=>tt.toCategory(X.product.category)),["prevent"]))},(0,o.zw)(X.product.category),1)]),f])]),(0,i._)("div",g,[(0,i._)("div",m,[(0,i._)("img",{class:"rounded-4",src:X.product.imageUrl,alt:X.product.title},null,8,b)]),(0,i._)("div",y,[(0,i._)("div",w,[(0,i._)("h2",v,(0,o.zw)(X.product.title),1)]),(0,i._)("div",_,[(0,i._)("p",{class:"fs-4",innerHTML:X.product.subTitle},null,8,k)]),(0,i._)("div",x,[(0,i._)("p",{class:"fs-5 text-gray800",innerHTML:X.product.description},null,8,I)]),(0,i._)("div",L,[(0,i._)("p",M,[(0,i.Uk)("作者 : "),X.isLoading?((0,i.wg)(),(0,i.j4)(it,{key:0,width:"25%"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(X.product.author),1)]),(0,i._)("p",T,[(0,i.Uk)("出版社 : "),X.isLoading?((0,i.wg)(),(0,i.j4)(it,{key:0,width:"25%"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(X.product.publishing_house),1)]),(0,i._)("p",C,[(0,i.Uk)("出版日期 : "),X.isLoading?((0,i.wg)(),(0,i.j4)(it,{key:0,width:"25%"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(X.product.publication_date),1)]),(0,i._)("p",S,[(0,i.Uk)("庫存 : "),X.isLoading?((0,i.wg)(),(0,i.j4)(it,{key:0,width:"25%"})):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,o.zw)(X.product.inventory)+" "+(0,o.zw)(X.product.unit),1)])]),(0,i._)("div",P,[(0,i._)("span",V,"原價 NT$ "+(0,o.zw)(t.$filters.currency(X.product.origin_price)),1),(0,i._)("span",z,"特價: NT$ "+(0,o.zw)(t.$filters.currency(X.product.price)),1)]),(0,i._)("div",U,[(0,i._)("button",{type:"button",class:"btn btn-outline-primaryMiddle px-4 py-2 me-2 fw-bold",style:{"font-size":"18px"},onClick:e[1]||(e[1]=(0,r.iM)((e=>t.toggleFavorite(X.product)),["prevent"]))},[t.favoriteId.includes(X.product.id)?((0,i.wg)(),(0,i.iD)("span",H,[$,(0,i.Uk)(" 已加入收藏 ")])):((0,i.wg)(),(0,i.iD)("span",q,[N,(0,i.Uk)(" 加入收藏 ")]))]),(0,i._)("button",{type:"button",class:"btn btn-outline-primaryMiddle border-2 me-2 fw-bold",style:{"font-size":"18px"},onClick:e[2]||(e[2]=e=>t.addToCart(X.product))},[(0,i.Uk)(" 加入購物車"),(0,i.wy)((0,i._)("span",null,O,512),[[r.F8,t.isLoadingItem===X.product.id]])]),(0,i._)("button",{type:"button",class:"btn btn-primaryMiddle fw-bold text-white me-2 px-4 py-2",style:{"font-size":"18px"},onClick:e[3]||(e[3]=(0,r.iM)((e=>t.addToCart1(X.product)),["prevent"]))},"直接購買")])])])])])]),(0,i._)("section",Z,[(0,i._)("div",D,[(0,i._)("div",j,[F,(0,i._)("p",{class:"pb-4 pe-4 text-gray700",innerHTML:X.product.content},null,8,B),W,Y,(0,i._)("p",{class:"pb-4 pe-4",innerHTML:X.product.table_contents},null,8,A)]),(0,i._)("div",E,[G,K,(0,i._)("p",Q,(0,o.zw)(X.product.author),1),(0,i._)("p",{class:"fs-6 ps-3",innerHTML:X.product.author_intro},null,8,R)])])])],64)}s(7658);var tt=s(206),et=s(2578),st=s(4677),it=s(6294),rt={mixins:[tt.Z],components:{},data(){return{product:[],isLoading:!1,quantity:1}},watch:{product:{},quantity(){this.quantity<=0&&(this.quantity=1)},$route(){void 0!==this.$route.params.id&&this.getProduct()}},computed:{...(0,et.rn)(st.Z,["cartData"]),...(0,et.rn)(it.Z,["isLoadingItem"])},methods:{...(0,et.nv)(st.Z,["addToCart","addToCart1"]),getProduct(){const t=this.$route.params.id;this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/api/claire0127-api/product/${t}`).then((t=>{this.product=t.data.product,this.isLoading=!1,this.resentlyViewed(this.product)})).catch((()=>{this.isLoading=!1}))},toCategory(t){this.$router.push({name:"list",query:{pathCategory:t}})}},mounted(){this.getProduct()}},ot=s(89);const at=(0,ot.Z)(rt,[["render",X]]);var nt=at}}]);
//# sourceMappingURL=895.86562197.js.map