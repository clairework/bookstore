(self["webpackChunkbookstore"]=self["webpackChunkbookstore"]||[]).push([[677],{9016:function(t,o,e){var i=e(9159),n=i.Symbol;t.exports=n},3102:function(t,o,e){var i=e(9016),n=e(2366),r=e(2886),c="[object Null]",s="[object Undefined]",a=i?i.toStringTag:void 0;function u(t){return null==t?void 0===t?s:c:a&&a in Object(t)?n(t):r(t)}t.exports=u},6009:function(t,o,e){var i=e(1626),n=/^\s+/;function r(t){return t?t.slice(0,i(t)+1).replace(n,""):t}t.exports=r},791:function(t,o,e){var i="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g;t.exports=i},2366:function(t,o,e){var i=e(9016),n=Object.prototype,r=n.hasOwnProperty,c=n.toString,s=i?i.toStringTag:void 0;function a(t){var o=r.call(t,s),e=t[s];try{t[s]=void 0;var i=!0}catch(a){}var n=c.call(t);return i&&(o?t[s]=e:delete t[s]),n}t.exports=a},2886:function(t){var o=Object.prototype,e=o.toString;function i(t){return e.call(t)}t.exports=i},9159:function(t,o,e){var i=e(791),n="object"==typeof self&&self&&self.Object===Object&&self,r=i||n||Function("return this")();t.exports=r},1626:function(t){var o=/\s/;function e(t){var e=t.length;while(e--&&o.test(t.charAt(e)));return e}t.exports=e},3738:function(t,o,e){var i=e(150),n=e(657),r=e(2012),c="Expected a function",s=Math.max,a=Math.min;function u(t,o,e){var u,f,p,l,h,d,m=0,v=!1,g=!1,y=!0;if("function"!=typeof t)throw new TypeError(c);function C(o){var e=u,i=f;return u=f=void 0,m=o,l=t.apply(i,e),l}function x(t){return m=t,h=setTimeout(L,o),v?C(t):l}function b(t){var e=t-d,i=t-m,n=o-e;return g?a(n,p-i):n}function w(t){var e=t-d,i=t-m;return void 0===d||e>=o||e<0||g&&i>=p}function L(){var t=n();if(w(t))return B(t);h=setTimeout(L,b(t))}function B(t){return h=void 0,y&&u?C(t):(u=f=void 0,l)}function j(){void 0!==h&&clearTimeout(h),m=0,u=d=f=h=void 0}function I(){return void 0===h?l:B(n())}function T(){var t=n(),e=w(t);if(u=arguments,f=this,d=t,e){if(void 0===h)return x(d);if(g)return clearTimeout(h),h=setTimeout(L,o),C(d)}return void 0===h&&(h=setTimeout(L,o)),l}return o=r(o)||0,i(e)&&(v=!!e.leading,g="maxWait"in e,p=g?s(r(e.maxWait)||0,o):p,y="trailing"in e?!!e.trailing:y),T.cancel=j,T.flush=I,T}t.exports=u},150:function(t){function o(t){var o=typeof t;return null!=t&&("object"==o||"function"==o)}t.exports=o},4430:function(t){function o(t){return null!=t&&"object"==typeof t}t.exports=o},7691:function(t,o,e){var i=e(3102),n=e(4430),r="[object Symbol]";function c(t){return"symbol"==typeof t||n(t)&&i(t)==r}t.exports=c},657:function(t,o,e){var i=e(9159),n=function(){return i.Date.now()};t.exports=n},2012:function(t,o,e){var i=e(6009),n=e(150),r=e(7691),c=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;function p(t){if("number"==typeof t)return t;if(r(t))return c;if(n(t)){var o="function"==typeof t.valueOf?t.valueOf():t;t=n(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var e=a.test(t);return e||u.test(t)?f(t.slice(2),e?2:8):s.test(t)?c:+t}t.exports=p},4677:function(t,o,e){"use strict";e(7658);var i=e(4161),n=e(2578),r=e(2492),c=e.n(r),s=e(3738),a=e.n(s),u=e(6294);const f=(0,u.Z)();o["Z"]=(0,n.Q_)("cartStore",{state:()=>({cartData:{carts:[],final_total:""},coupon_code:""}),actions:{getCartList(){f.isBounced=!0,i.Z.get("https://vue3-course-api.hexschool.io/api/claire0127-api/cart").then((t=>{this.cartData=t.data.data,f.isBounced=!1})).catch((()=>{f.pushMsg(!1,"載入","請重新整理")}))},updateCart(t,o=1){t.qty<=1?t.qty=1:t.qty>=t.product.inventory&&(t.qty=t.product.inventory),console.log(o),i.Z.put(`https://vue3-course-api.hexschool.io/api/claire0127-api/cart/${t.id}`,{data:{product_id:t.product.id,qty:Number(t.qty)}}).then((t=>{this.getCartList(),console.log(t),c().fire({position:"center",icon:"success",title:"已成功更新購物車",showConfirmButton:!1,timer:2e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"更新購物車失敗",showConfirmButton:!1,timer:2e3})}))},delCartItem(t){i.Z["delete"](`https://vue3-course-api.hexschool.io/api/claire0127-api/cart/${t.id}`).then((t=>{this.getCartList(),console.log(t),c().fire({position:"center",icon:"success",title:"已成功刪除品項！",showConfirmButton:!1,timer:1e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"刪除品項失敗！",showConfirmButton:!1,timer:1e3})}))},delAllCart(t){f.isLoadingItem=t.id,i.Z["delete"]("https://vue3-course-api.hexschool.io/api/claire0127-api/carts").then((t=>{f.isLoadingItem="",console.log(t),this.getCartList(),c().fire({position:"center",icon:"success",title:"已成功刪除所有品項！",showConfirmButton:!1,timer:2e3})})).catch((()=>{f.isLoadingItem="",c().fire({position:"center",icon:"error",title:"刪除所有品項失敗！",showConfirmButton:!1,timer:2e3})}))},addToCart:a()((function(t,o=1){f.isLoadingItem=t.id,console.log(f.isLoadingItem);let e=this.cartData.carts.filter((o=>o.product_id===t.id));e={...e[0]};const n=e.qty+o;n>t.inventory?(c().fire({position:"center",icon:"warning",title:"已無庫存,暫時無法訂購",showConfirmButton:!1,timer:1e3}),f.isLoadingItem=""):i.Z.post("https://vue3-course-api.hexschool.io/api/claire0127-api/cart",{data:{product_id:t.id,qty:o}}).then((t=>{this.getCartList(),console.log(t),c().fire({position:"center",icon:"success",title:"已成功加入購物車！",showConfirmButton:!1,timer:1e3}),f.isLoadingItem=""})).catch((()=>{c().fire({position:"center",icon:"error",title:"加入購物車失敗！",showConfirmButton:!1,timer:1e3})}))}),500),addToCart1:a()((function(t,o=1){f.isLoadingItem=t.id,console.log(f.isLoadingItem);let e=this.cartData.carts.filter((o=>o.product_id===t.id));e={...e[0]};const n=e.qty+o;n>t.inventory?(c().fire({position:"center",icon:"warning",title:"已無庫存,暫時無法訂購",showConfirmButton:!1,timer:1e3}),f.isLoadingItem=""):i.Z.post("https://vue3-course-api.hexschool.io/api/claire0127-api/cart",{data:{product_id:t.id,qty:o}}).then((t=>{this.getCartList(),console.log(t),f.isLoadingItem=""})).catch((()=>{})),this.$router.push("/checkcart")}),500),addCouponCode(){""===this.coupon_code?c().fire({position:"center",icon:"error",title:"您尚未填入優惠碼",showConfirmButton:!1,timer:2e3}):i.Z.post("https://vue3-course-api.hexschool.io/api/claire0127-api/coupon",{data:{code:this.coupon_code}}).then((t=>{this.getCartList(),console.log(this.coupon_code),console.log(t),c().fire({position:"center",icon:"success",title:"已套用優惠券",showConfirmButton:!1,timer:2e3})})).catch((()=>{c().fire({position:"center",icon:"error",title:"套用優惠券失敗",showConfirmButton:!1,timer:2e3})}))}}})}}]);
//# sourceMappingURL=677.b41857c6.js.map