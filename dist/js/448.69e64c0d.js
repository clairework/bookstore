"use strict";(self["webpackChunkbookstore"]=self["webpackChunkbookstore"]||[]).push([[448],{2913:function(e,s,t){t.d(s,{Z:function(){return w}});var a=t(3396),r=t(7139);const l={class:"zones section_process py-5"},d={class:"container"},o={class:"row justify-content-center"},i={class:"col-md-10"},c={class:"step-wrap"},n=(0,a._)("div",{class:"step step1 done"},[(0,a._)("h3",null,"1"),(0,a._)("span",{class:"txt"},"購物車")],-1),p=(0,a._)("h3",null,"2",-1),u=(0,a._)("span",{class:"txt"},"付款資訊",-1),b=[p,u],_=(0,a._)("h3",null,"3",-1),m=(0,a._)("span",{class:"txt"},"確認付款",-1),h=[_,m],g={class:"progress"};function f(e,s,t,p,u,_){return(0,a.wg)(),(0,a.iD)("section",l,[(0,a._)("div",d,[(0,a._)("div",o,[(0,a._)("div",i,[(0,a._)("div",c,[n,(0,a._)("div",{class:(0,r.C_)(["step step2",{done:2===t.step||3===t.step}])},b,2),(0,a._)("div",{class:(0,r.C_)(["step step3",{done:3===t.step}])},h,2)]),(0,a._)("div",g,[(0,a._)("div",{class:(0,r.C_)(["progress-bar bg-primary",{step2:2===t.step,step3:3===t.step}]),role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,2)])])])])])}var v={data(){return{}},props:["step"]},y=t(89);const x=(0,y.Z)(v,[["render",f]]);var w=x},5448:function(e,s,t){t.r(s),t.d(s,{default:function(){return ie}});var a=t(3396),r=t(7139),l=t(9242);const d=e=>((0,a.dD)("data-v-1f06d0ea"),e=e(),(0,a.Cn)(),e),o=d((()=>(0,a._)("div",{class:"spinner-border text-primary m-5",role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")],-1))),i={class:"front-check"},c={class:"bg-light"},n={class:"container pt-5 pb-5"},p={class:"row"},u={class:"col-lg-8 mb-6 mb-md-0 pt-4"},b={class:"card p-3 border-0 bg-white mb-4 shadow-sm"},_=d((()=>(0,a._)("h3",{class:"pb-3 text-gray600 fs-4 border-gray300",style:{"border-bottom":"2px solid rgba(0, 0, 0, 0.12)","align-items":"baseline"}},"結帳確認",-1))),m={class:"table align-middle fs-6 bg-white text-gray600"},h=d((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"fs-5"},[(0,a._)("th",{class:"d-none d-md-table-cell text-start",width:"50%"},"課程名稱"),(0,a._)("th",{class:"d-none d-md-table-cell text-end",width:"20%"},"售價"),(0,a._)("th",{class:"d-none d-md-table-cell text-end",width:"10%"},"數量"),(0,a._)("th",{class:"d-none d-md-table-cell text-end",width:"20%"},"金額")])],-1))),g={class:"d-flex align-items-center p-3 fs-5"},f=["src","alt"],v={class:"cart-body text-start"},y={class:""},x={width:"20%"},w={class:"text-end fs-5"},k={width:"10%"},$={class:"text-end fs-5"},D={width:"20%"},L={class:"text-end fs-5"},z={class:"card border-0 shadow-sm rounded-2"},C=(0,a.uE)('<div class="bg-white p-4" data-v-1f06d0ea><h3 class="pb-3 text-gray600 fs-4 border-gray300" style="border-bottom:2px solid rgba(0, 0, 0, 0.12);align-items:baseline;" data-v-1f06d0ea>付款資訊</h3><select class="form-select form-select-lg bg-gray300 my-3 w-40 border-gray300 text-gray600" aria-label=".form-select-lg example" style="font-size:18px;" disabled data-v-1f06d0ea><option selected data-v-1f06d0ea>信用卡</option><option value="1" data-v-1f06d0ea>ATM 轉帳</option><option value="2" data-v-1f06d0ea>超商付款</option><option value="3" data-v-1f06d0ea>信用卡</option></select></div>',1),M={class:"text-gray600"},O={class:"bg-white p-4 p-md-8 rounded-2"},I=d((()=>(0,a._)("h3",{class:"pb-3 text-gray600 fs-4 mb-3",style:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)","align-items":"baseline"}},"訂購人資料",-1))),T={class:"row"},Z={class:"mb-4 col-md-6 fs-5"},j=d((()=>(0,a._)("label",{for:"name",class:"form-label"},"收件人姓名",-1))),N=["value"],U={class:"mb-4 col-md-6 fs-5"},H=d((()=>(0,a._)("label",{for:"email",class:"form-label"},"聯絡用電子信箱",-1))),P=["value"],S={class:"mb-4 col-md-6 fs-5"},W=d((()=>(0,a._)("label",{for:"tel",class:"form-label"},"收件人電話",-1))),Y=["value"],q={class:"mb-4 col-md-6 fs-5"},A=d((()=>(0,a._)("label",{for:"address",class:"form-label"},"收件人地址",-1))),E=["value"],K={class:"mb-3"},V=d((()=>(0,a._)("label",{for:"message",class:"form-label"},"備註",-1))),B=["value"],F={class:"col-lg-4 pt-4"},G={class:"card fw-bold border-0 p-3 shadow text-gray600"},J=d((()=>(0,a._)("h5",{class:"pb-2",style:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)"}},"訂單明細",-1))),Q={class:"fs-5"},R={class:"text-gray600 fw-bold float-end"},X={class:"fs-5"},ee={class:"text-secondaryDark fs-4 fw-bold float-end"};function se(e,s,t,d,se,te){const ae=(0,a.up)("LoadingView"),re=(0,a.up)("OrderSteps");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ae,{class:"loading",active:se.isLoading},{default:(0,a.w5)((()=>[o])),_:1},8,["active"]),(0,a._)("div",i,[(0,a._)("div",c,[(0,a.Wm)(re,{cartData:e.cartData,step:se.step},null,8,["cartData","step"]),(0,a._)("div",n,[(0,a._)("div",p,[(0,a._)("div",u,[(0,a._)("div",b,[_,(0,a._)("table",m,[h,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(se.order.products,(s=>((0,a.wg)(),(0,a.iD)("tr",{key:s.id},[(0,a._)("td",null,[(0,a._)("div",g,[(0,a._)("img",{class:"me-4",style:{height:"110px",width:"80px","object-fit":"cover"},src:s.product.imageUrl,alt:s.product.title},null,8,f),(0,a._)("div",v,[(0,a._)("p",y,(0,r.zw)(s.product.title),1)])])]),(0,a._)("td",x,[(0,a._)("p",w,"NT$ "+(0,r.zw)(e.$filters.currency(s.product.price)),1)]),(0,a._)("td",k,[(0,a._)("p",$,(0,r.zw)(s.qty),1)]),(0,a._)("td",D,[(0,a._)("p",L,"NT$ "+(0,r.zw)(e.$filters.currency(s.product.price)),1)])])))),128))])])]),(0,a._)("div",z,[C,(0,a._)("div",M,[(0,a._)("form",O,[I,(0,a._)("div",T,[(0,a._)("div",Z,[j,(0,a._)("input",{id:"name",name:"姓名",type:"text",class:"form-control border-1 rounded-2 text-gray600 bg-gray300",value:se.order.user.name,disabled:""},null,8,N)]),(0,a._)("div",U,[H,(0,a._)("input",{id:"email",name:"email",type:"email",class:"form-control border-1 rounded-2 text-gray600 bg-gray300",value:se.order.user.email,disabled:""},null,8,P)]),(0,a._)("div",S,[W,(0,a._)("input",{id:"tel",name:"電話",type:"text",class:"form-control border-1 rounded-2 text-gray600 bg-gray300",value:se.order.user.tel,disabled:""},null,8,Y)]),(0,a._)("div",q,[A,(0,a._)("input",{id:"address",name:"地址",type:"text",class:"form-control border-1 rounded-2 text-gray600 bg-gray300",value:se.order.user.address,disabled:""},null,8,E)]),(0,a._)("div",K,[V,(0,a._)("textarea",{id:"message",class:"form-control min-h-25 border-1 rounded-2 bg-gray300",value:se.order.message,disabled:""},null,8,B)])])])])])]),(0,a._)("div",F,[(0,a._)("div",null,[(0,a._)("div",G,[J,(0,a._)("p",Q,[(0,a.Uk)(" 訂單編號 : "),(0,a._)("span",R,(0,r.zw)(se.order.id),1)]),(0,a._)("p",X,[(0,a.Uk)(" 訂單金額 : "),(0,a._)("span",ee,"NT$"+(0,r.zw)(e.$filters.currency(Math.round(se.order.total))),1)]),(0,a._)("button",{type:"submit",class:"btn btn-secondary text-primaryDark fw-bold fs-4 px-2",onClick:s[0]||(s[0]=(0,l.iM)(((...e)=>te.pay&&te.pay(...e)),["prevent"]))},"確認付款")])])])])])])])],64)}t(7658);var te=t(2578),ae=t(6294),re=t(2913),le={data(){return{step:3,order:{user:{},products:{}},final_total:"",discount_price:"",orderProducts:[],orderId:this.$route.params.id,isLoading:!1,title:"建立訂單"}},components:{OrderSteps:re.Z},watch:{final_total:{handler(){this.discount_price=this.final_total-this.cartData.total},deep:!0}},methods:{...(0,te.nv)(ae.Z,["pushMsg"]),getOrders(e){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/api/claire0127-api/order/${e}`).then((e=>{this.order=e.data.order,this.orderProducts=Object.keys(this.order.products).map((e=>this.order.products[e])),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},pay(){this.isLoading=!0,this.$http.post(`https://vue3-course-api.hexschool.io/api/claire0127-api/pay/${this.orderId}`).then((e=>{this.isLoading=!1,this.pushMsg(e,"更新","已付款成功"),this.$router.push("/payment")}))},copyOrderId(e){navigator.clipboard.writeText(e).then((()=>{this.pushMsg(!0,"複製","您已成功複製優惠碼!")}))}},mounted(){this.getOrders(this.orderId)}},de=t(89);const oe=(0,de.Z)(le,[["render",se],["__scopeId","data-v-1f06d0ea"]]);var ie=oe}}]);
//# sourceMappingURL=448.69e64c0d.js.map